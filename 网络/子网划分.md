# IP地址、子网掩码、网络数、主机数、广播地址及其计算方法



[toc]

原文链接：[IP地址、子网掩码、网络数、主机数、广播地址及其计算方法_LPFAM的博客-CSDN博客_直播广播地址怎么计算](https://link.zhihu.com/?target=https%3A//blog.csdn.net/LPFAM/article/details/106457554)

## 1. IP 地址概念

## 2.子网掩码

子网掩码又叫网络掩码、地址掩码、子网络遮罩。它是一种用来指明一个IP地址的哪些位 标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。



子网掩码也是一个32位地址，只有一个作用：就是将某个IP地址划分成网络地址和主机地址两部分。

1. 通过子网掩码，可以判断两个IP 地址在不在同一个局域网
2. 子网掩码可以看出多少位是网络号，多少位是主机号
3. 其对应的IP地址中网络地址的所有位置都为1，对应于主机地址的所有位置都为0



每一类IP地址都有默认的子网掩码

对于A类地址来说，默认的子网掩码是255.0.0.0；

对于B类地址来说，默认的子网掩码是255.255.0.0；

对于C类地址来说，默认的子网掩码是255.255.255.0



## 3. 广播地址

广播地址（Broadcast Address）是专门用于同时向网络中所有工作站进行发送的一个地址

在使用TCP/IP协议的网络中，主机标识段host ID为全1的IP地址为广播地址，广播的分组传送给host ID段所涉及的所有计算机。

例如，对于10.1.1.0 （255.255.255.0 ）网段，其广播地址为10.1.1.255 （255 即为2 进制的11111111 ），当发出一个目的地址为10.1.1.255 的分组（封包）时，它将被分发给该网段上的所有计算机。



## 4. 子网划分

子网划分定义：Internet组织机构定义了五种IP地址，有A、B、C三类地址。A类网络有126个，每个A类网络可能有16777214台主机，它们处于同一广播域。而在同一广播域中有这么多节点是不可能的，网络会因为广播通信而饱和，结果造成16777214个地址大部分没有分配出去。可以把基于每类的IP网络进一步分成更小的网络，每个子网由路由器界定并分配一个新的子网网络地址,子网地址是借用基于每类的网络地址的主机部分创建的。划分子网后，通过使用掩码，把子网隐藏起来，使得从外部看网络没有变化，这就是子网掩码。



## 5. 网络地址计算

1. 将IP地址和子网掩码换算为二进制，子网掩码连续全1的是网络地址，后面是主机地址
2. 将子网掩码和IP地址按位进行逻辑“与”运算，得到IP地址的网络地址，剩下的部分是主机地址，从而区分出任意IP地址中网络地址和主机地址。
3. 将运算结果中的网络地址不变，主机地址变为1，结果就是广播地址

注：网络地址+1即为第一个主机地址，广播地址-1即为最后一个主机地址，

由此可以看出地址范围是： 网络地址+1 至 广播地址-1



示例

一个主机的IP地址是202.112.14.137，掩码是255.255.255.224，要求计算这个主机所在网络的网络地址和广播地址

子网掩码255.255.255.224 转二进制：11111111.11111111.11111111.11100000

其中网络位部分是27位，主机位部分是5位

网络地址就是：把IP地址转成二进制和子网掩码进行与运算

IP地址202.112.14.137转二进制：11001010 01110000 00001110 10001001

IP地址&子网掩码



11001010 01110000 00001110 10001001



11111111 11111111 11111111 11100000



11001010 01110000 00001110 10000000

注：与位运算：0与任何数运算为0,1与1运算为1

结果为：202.112.14.128



## 6.广播地址计算

网络地址的主机位全部变成1 ，10011111 即159 即：202.112.14.159



## 7.网络数计算

网络数=2的X次方（X是子网掩码中，借的1的个数）如：202.106.1.0/25 是一个C类地址借了一位。因为C类默认是/24嘛。所以X=1。网络数=2的1次方=2个。



## 8.主机数计算

主机数=2的Y次方-2（Y是子网掩码中0的个数）-2是掐头去尾，头是网络号，尾是广播地址。/25意味着子网掩码中有25个1，剩下32-25个0，也就是7个。所以主机数=2的7次方-2=126，也就是每个子网可以产生126个可以分配给主机使用的IP地址。



## 9.块大小计算

块大小=256-子网掩码：如：202.106.1.0/25 子网掩码=255.255.255.128 所以块大小=256-128=128。块大小知道了，网道络号就知了。因为，202.106.1.0/25 第一个网络号一定是202.106.1.0 第二个网络号就=202.106.1.0 + 128 =202.106.1.128。



于是得出：202.106.1.0/25 这个子网的网络号就是1.0第一个IP就是1.1，最后一个IP=下一个网络号-2=128-2=202.106.1.126。而202.106.1.127是第一网段的广播地址。



202.106.1.128/25 这个子网的网络号就是1.128 第一个IP就是1.129.最后一个IP就是1.254，而1.255是这个网段的广播地址。



ip段/数字-如192.168.0.1/24是什么意思?

后面数字24是告诉我们有多少网络位，也就是子网掩码中前有多少位1。即：子网掩码为11111111.11111111.11111111.00000000———255.255.255.0



示例：IP地址为202.106.1.0/26 求子网数（网络数）？主机数？网络地址？广播地址？

数字26告诉我们，IP地址的子网掩码为：11111111.11111111.11111111.11000000

这是一个C类地址，默认子网掩码为255.255.255.0。题目IP地址为：255.255.255.192，而网络位借用了主机位两个位置为1

所以：子网数（网络数）=2的X次方（X是子网掩码中，借的1的个数）=4

主机数=2的Y次方-2（Y是子网掩码中0的个数）=62

IP地址转换二进制：11001010.1101010.00000001.00000000

网络地址（网络号）：202.106.1.0、202.106.64、202.106.1.128、202.106.1.192

广播地址：202.106.1.63、202.106.1.127、202.106.1.191、202.106.1.255



上述示例为划分子网的IP地址规划。随着技术革新，现在IP地址的划分都是使用CIDR（无分类编址）进行IP地址的划分

![img](https://soft-package-xisheng.oss-cn-hangzhou.aliyuncs.com/picture/diary/v2-ee5f3936b09a108b046778faed039040_1440w.jpeg)

IPv4地址编址的三个历史阶段

是采用CIDR后，网络前缀+主机地址——回归二级编址

CIDR消除传统A类、B类、C类地址，以及子网划分的概念

CIDR可更加有效的分配IPv4有限的地址空间，为IPv6的到来拖延时间

CIDR规范下，采用“斜线记法”，在IPv4地址后跟斜线“/”，之后标注网络前缀的比特长度这样所有IPv4可用地址范围都可按需划分为适当大小的网段进行分配，不在需要受ABC类地址的限制

那么，在CIDR的规划下该如何划分地址呢？

假设申请到的地址资源块是218.205.201.0/24，需求是从中划分出5个网段

（1个 /27段 ， 3个/28段， 1个 /30段）

![image-20230414085531860](https://soft-package-xisheng.oss-cn-hangzhou.aliyuncs.com/picture/diary/image-20230414085531860.png)

![image-20230414085517028](https://soft-package-xisheng.oss-cn-hangzhou.aliyuncs.com/picture/diary/image-20230414085517028.png)

分配原则：每个子网段起点位置不能随意，只能选取块大小整数倍的地址作为起点。

优先分大块，后分小块；划分地址段时，一个地址段的起始地址一定是该地址块大小的整数倍。如果不是，则向后推起始地址，中间跳过的地址保留下次使用。