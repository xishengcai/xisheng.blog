# 设计模式在工程项目中的应用

## 设计模式介绍

　　一般而言，一个设计模式具有模式名称、适用场景、解决方案和效果四个方面的基本要素。设计模式根据其目的可以分为创建型、结构性和行为型三种类型，创建型模式，主要负责对象的创建工作，程序在明确需要创建对象时，可以获得更大的灵活性。常用的创建型设计模式有单例模式、工厂方法、原型、构造器、抽象工厂5种。结构型模式，负责处理类或对象之间的关系，用于构件结构更加复杂庞大的系统，常用的结构型设计模式有适配器、桥接模式、享元模式、组合模式、外观模式、代理模式等七种模式。行为模式，主要任务是对类或对象如何交互以及为类和对象分配具体职责进行描述。常用的行为设计模式有观察者、状态、策略、备忘录、责任链、命令、中介者等11种模式。这些设计模式都是经过反复使用的成熟方法，对优化软件结构，提供软件质量具有指导意义



​	一般而言， 一个设计模式具有模式名称、使用场景、解决放哪和效果四个方面的基本要素。设计模式更具其目的可以分为创建型、结构型和行为型三种类型，创建型模式，主要负责对象的创建工作，程序在明确需要创建对象时，可以获得更大的灵活性。结构型模式，负责处理**类和对象之间的关系，用于构建结构更加复杂庞大的系统**，常用的结构型设计模式有适配器、桥接模式、享元模式、组合模式、外观模式、代理模式等七种模式。行为模式，主要任务是**对类或对象如何交互以及类的对象分配具体职责**进行描述。常用的行为设计模式有观察者、状态、策略、备忘录、责任链、命令、中介者等11种模式化





## 项目介绍





## 使用背景

1. 抽象工厂方法

​		在devops项目中，为了满足不同企业用户对代码仓库使用的多样性，我们需要对接gitlab，gitee，github，华为codehub等代码仓库。由于用户集成仓库类型具有不确定性，设计者无法确定具体实例化哪一个类。为了解决这个问题，设计者使用了工厂方法模式。首先定义一个代码仓库类接口也叫抽象产品GitInterface，接口内定义了不同类型仓库必须要实现的方法，然后再定义具体代码仓库类GitHub,GitLab,Gitee,CodeHub。其次定义抽象工厂类NewGitFactory和具体工厂类NewGithub，NewGitLab，NewGitee，NewCodeHub。对外使用，只需要执行GitInterface定义的方法，实例化对象，则根据用户传参调用具体工厂方法。后续扩展新的仓库类型，只需要定义增加具体工厂类，和具体代码仓库类，代码仓库类实现抽象产品接口即可。这种良好的扩展性设计，符合开闭原则。

2. 建造者模式

   在平时的开发中，我们需要经常使用HTTP调用工具类，该类使用的时候可能只需要一个路径参数，也可能需要Header、Body、Query、请求方式等各种组合参数。为了解决不同开发人员在使用上的代码风格一致性。该类在使用过程中需要额外添加限流，请求体上下文处理。设计者采用了建造者模式，首先定一个基类Request，为Request添加开发者可能需要用到属性，然后为每一个属性添加定义一个方法，并且返回其自身。通过该设计模式的使用，有效提提高了代码的整洁度。

3. 访问者模式

   devops项目中需要使用命令行，向服务端获取任务状态和提交任务，但是每次将请求数据提交给APIServer前需要对数据进行校验，添加注解，数据转化，数据对比等操作。不同的提交方式，数据处理手段不一样，每次处理完后，不希望原始数据结构被污染。设计者使用Build和Visitor模式

