# kubeadm 源码编译



### 源码修改

```
 // CertificateValidity defines the validity for all the signed certificates generated by kubeadm
        // CertificateValidity = time.Hour * 24 * 365
        CertificateValidity = time.Hour * 24 * 365 * 100
```



```
NewSelfSignedCACert
```



### 修改KUBE_GIT_TREE_STATE

修改 kubernetes/hack/lib/version.sh 文件，将变量 KUBE_GIT_TREE_STATE="dirty" 修改为 KUBE_GIT_TREE_STATE="clean"，dirty 表示 Git 提交 ID 之后的源代码有更改，clean 表示 Git 提交 ID 之后没有更改，为了确保版本号干净，都修改为 clean。



### 源码编译

- mac 环境

```
make WHAT=cmd/kubeadm KUBE_BUILD_PLATFORMS=linux/amd64
```









https://sysin.org/blog/kubernetes-kubeadmin-cert-100y/



https://www.dazhuanlan.com/tangjiefei/topics/1575858